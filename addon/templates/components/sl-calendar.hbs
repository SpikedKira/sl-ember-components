<div class="calendar-{{viewMode}}">

    {{#if viewingDays}}
        {{#if showControls}}
            <table class="calendar-controls">
                <tr>
                    <th>
                        <button tabIndex="-1" {{action "changeMonth" -1}} class="btn btn-xs btn-default">
                            <span class="sl-icon-previous">previous month</span>
                        </button>
                    </th>
                    <th>
                        <a href="#" tabIndex="-1" {{action "setView" "months"}}>
                            <span class='calendar-title'>{{calendarTitle}}</span>
                        </a>
                    </th>
                    <th>
                        <button tabIndex="-1" {{action "changeMonth" 1}} class="btn btn-xs btn-default">
                            <span class="sl-icon-next">next month</span>
                        </button>
                    </th>
                </tr>
            </table>
        {{else}}
            <span class='calendar-title'>{{calendarTitle}}</span>
        {{/if}}

        <table role="grid">
            <thead>
                <tr>
                    {{#each shortWeekDayNames as |dayName|}}
                        <th class="dow" role="columnheader">{{dayName}}</th>
                    {{/each}}
                </tr>
            </thead>
            {{#sl-grouping
                groupTag="tr"
                tagName="tbody"
                groupsOf=7
                items=daysInMonthView as |day|
            }}
                {{#sl-calendar-day
                    action="selectDate"
                    active=day.active
                    events=day.events
                    new=day.new
                    old=day.old
                    date=day.date
                    focused=day.focused
                    restricted=day.restricted
                }}
                    {{day.dayName}}
                {{/sl-calendar-day}}
            {{/sl-grouping}}
        </table>
    {{/if}}

    {{#if viewingMonths}}
        {{#if showControls}}
            <table class="calendar-controls">
                <tr>
                    <th>
                        <button tabIndex="-1" {{action "changeYear" -1}} class="btn btn-xs btn-default">
                            <span class="sl-icon-previous">previous year</span>
                        </button>
                    </th>
                    <th>
                        <a href="#" tabIndex="-1" {{action "setView" "years"}}>
                            <span class='calendar-title'>{{calendarTitle}}</span>
                        </a>
                    </th>
                    <th>
                        <button tabIndex="-1" {{action "changeYear" 1}} class="btn btn-xs btn-default">
                            <span class="sl-icon-next">next year</span>
                        </button>
                    </th>
                </tr>
            </table>
        {{else}}
            <span class='calendar-title'>{{calendarTitle}}</span>
        {{/if}}

        <table role="grid">
            {{#sl-grouping
                groupTag="tr"
                tagName="tbody"
                groupsOf=4
                items=monthsInYearView as |month|
            }}
                {{#sl-calendar-month
                    action="selectMonth"
                    active=month.active
                    locale=locale
                    month=month.month
                }}
                    {{month.monthName}}
                {{/sl-calendar-month}}
            {{/sl-grouping}}
        </table>
    {{/if}}

    {{#if viewingYears}}
        {{#if showControls}}
            <table class="calendar-controls">
                <tr>
                    <th>
                        <button tabIndex="-1" {{action "changeDecade" -1}} class="btn btn-xs btn-default">
                            <span class="sl-icon-previous">previous decade</span>
                        </button>
                    </th>
                    <th>
                        <span>
                            <span class='calendar-title'>{{calendarTitle}}</span>
                        </span>
                    </th>
                    <th>
                        <button tabIndex="-1" {{action "changeDecade" 1}} class="btn btn-xs btn-default">
                            <span class="sl-icon-next">next decade</span>
                        </button>
                    </th>
                </tr>
            </table>
        {{else}}
            <span class='calendar-title'>{{calendarTitle}}</span>
        {{/if}}

        <table role="grid">
            {{#sl-grouping
                groupTag="tr"
                tagName="tbody"
                groupsOf=4
                items=yearsInDecadeView as |year|
            }}
                {{sl-calendar-year
                    action="selectYear"
                    active=year.active
                    old=year.old
                    new=year.new
                    year=year.year
                }}
            {{/sl-grouping}}
        </table>
    {{/if}}

</div>
